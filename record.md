开发过程记录

- 重复生成汇编指令

比如说这两条 IR 指令:

```
%1 = add 1, 2
ret %1
```

basic block 里面会有 %1 = add 1, 2 和 ret %1 两条指令，遍历 basic block 会处理一次

ret 指令里面会指向 %1 = add 1, 2 ，也会处理一次

如果不做判断，会导致 %1 = add 1, 2 被处理两次

- 段错误

代码生成中，全局变量 fp 忘记赋值，导致段错误

整个 debug 过程一直在折腾 autotest 脚本，耗费大量时间，但是收效甚微

为此，加了一些方便测试 debug 的脚本，能够手动编译执行

- 段错误

寄存器存在一个数组里面，用的太多越界了

这个问题困难的地方在于，越界的地方没有报错，而是在另外一个地方报的错，完全让人摸不着头脑

这种以后要加个断言判断

其实也可以用 valgrind ，检查出内存的非法操作

## Lv4.2 变量和赋值

整个的难点在于目标代码生成，特别是 % 开头的临时变量的偏移量。
新加变量记录局部变量 (locals) 和临时变量计数 (stack_index) ，有返回值的 IR 需要增加临时变量计数，通过这种方式正确地实现了偏移计算。

临时变量如果使用压栈弹栈的方式，感觉实现起来更简单。
